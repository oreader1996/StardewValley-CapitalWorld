<Project Sdk="Microsoft.NET.Sdk">

	<PropertyGroup>
		<TargetFramework>net6.0</TargetFramework>
		<ImplicitUsings>enable</ImplicitUsings>
		<Nullable>enable</Nullable>
	</PropertyGroup>

	<!-- ⬇️⬇️⬇️ 核心修改 ⬇️⬇️⬇️ -->

	<Choose>
		<!-- 场景 1: 本地开发 (你的电脑) -->
		<!-- 如果 D 盘那个文件夹存在，就用它。 -->
		<When Condition="Exists('D:\SteamLibrary\steamapps\common\Stardew Valley')">
			<PropertyGroup>
				<GamePath>D:\SteamLibrary\steamapps\common\Stardew Valley</GamePath>
				<EnableModDeploy>true</EnableModDeploy>
				<EnableGameDebugging>true</EnableGameDebugging>
			</PropertyGroup>
		</When>

		<!-- 场景 2: GitHub Actions (或其他环境) -->
		<!-- 既然找不到真正的游戏，我们就给它一个"." (代表当前目录)。-->
		<!-- 当前目录肯定存在，所以不会报错说“找不到路径”。-->
		<!-- 之后构建工具发现当前目录下没有游戏文件，就会自动切换到使用包内自带的 DLL。 -->
		<Otherwise>
			<PropertyGroup>
				<GamePath>.</GamePath>
				<EnableModDeploy>false</EnableModDeploy>
				<EnableGameDebugging>false</EnableGameDebugging>
			</PropertyGroup>
		</Otherwise>
	</Choose>

	<!-- ⬆️⬆️⬆️ 修改结束 ⬆️⬆️⬆️ -->

	<ItemGroup>
		<PackageReference Include="Pathoschild.Stardew.ModBuildConfig" Version="4.4.0" />
	</ItemGroup>

	<ItemGroup>
		<None Include=".github\workflows\release.yml" />
	</ItemGroup>

</Project>